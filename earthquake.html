<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="
https://cdn.jsdelivr.net/npm/modern-normalize@3.0.1/modern-normalize.min.css
" rel="stylesheet">
  <title>地震預測</title>
</head>

<body>
  <svg id="map" class="map"></svg>
  <h1>test</h1>
  <button id="login">Threads 登入</button>
</body>
<script type="module">
  import * as d3 from "https://cdn.jsdelivr.net/npm/d3@7/+esm";

  const svg = d3.select("#map")

  const projection = d3.geoMercator().center([122, 24]).scale(7800)
  const path = d3.geoPath().projection(projection)

  const data = await d3.json("/taiwan.json/")

  svg.append("path")
    .datum(data)
    .attr("d", path)
    .attr("fill", "gray")
    .attr("stroke", "black")
    .attr("stroke-width", 2)

  const button = document.getElementById("login")

  button.addEventListener("click", () => {
    const url = "https://threads.net/oauth/authorize?client_id=23872373655703668&redirect_uri=https://台島.tw/threads-auth/&scope=threads_basic&response_type=code";
    window.open(url, "_system");
  });

</script>

<style>
  .map {
    margin-left: auto;
    margin-right: auto;
    width: 100vw;
    height: 100vw;
    max-width: 600px;
    max-height: 600px;
  }
</style>

</html>
